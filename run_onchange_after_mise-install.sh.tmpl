#!/bin/bash
# Trigger update when mise config changes: {{ include "private_dot_config/mise/config.toml.tmpl" | sha256sum }}

{{ if eq .chezmoi.os "darwin" -}}
# Ensure Homebrew mise is available during execution
export PATH="/opt/homebrew/bin:$PATH"
{{ end -}}

echo "Checking Mise runtimes..."

if command -v mise &> /dev/null; then
    # Install all tools defined in the generated config.toml
    mise install --yes
    mise reshim
else
    echo "Mise not found. Skipping runtime installation."
fi
